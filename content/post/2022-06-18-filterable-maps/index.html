---
title: Filterable Maps with leaflet and crosstalk
subtitle: For runtime-free content delivery
author: Alex Zajichek
date: '2022-06-18'
slug: filterable-maps
categories: []
tags: []
summary: ''
authors: []
lastmod: '2022-06-18T07:49:36-05:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>
<script src="{{< blogdown/postref >}}index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index_files/jquery/jquery.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/leaflet/leaflet.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet/leaflet.js"></script>
<link href="{{< blogdown/postref >}}index_files/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/proj4/proj4.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/Proj4Leaflet/proj4leaflet.js"></script>
<link href="{{< blogdown/postref >}}index_files/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet-binding/leaflet.js"></script>


<p><em><strong>In Progress</strong></em></p>
<p>When you run <code>R</code> locally and don’t have a server to process, how can you still deliver engaging analytic content?</p>
<p>Lately I’ve been spending a lot of time finding creative ways to deliver interactive and explorable analytic content to end-users in self-contained documents, without depending on a server to process the <code>R</code> code. There have been some incredible packages developed to help with this. Namely, two I focus on here are <code>leaflet</code> and <code>crosstalk</code>.</p>
<pre class="r"><code>require(tidyverse)</code></pre>
<pre><code>## Loading required package: tidyverse</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.8
## ✓ tidyr   1.2.0     ✓ stringr 1.4.0
## ✓ readr   2.1.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>require(leaflet)</code></pre>
<pre><code>## Loading required package: leaflet</code></pre>
<pre class="r"><code>require(crosstalk)</code></pre>
<pre><code>## Loading required package: crosstalk</code></pre>
<pre class="r"><code>state_outlines &lt;-
  maps::map(
    database = &quot;state&quot;,
    regions = &quot;wisconsin&quot;,
    fill = TRUE,
    plot = FALSE
  )

  leaflet() %&gt;%
  
  # Add geographic tiles
  addTiles() %&gt;%
  
  # Add US state outlines
  addPolygons(
    data = state_outlines,
    fillColor = &quot;gray&quot;,
    stroke = FALSE
  ) </code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPolygons","args":[[[[{"lng":[-87.8000564575195,-88.2011184692383,-88.3042602539062,-88.699592590332,-88.7740783691406,-88.9402389526367,-89.3756866455078,-89.3928756713867,-89.8455123901367,-89.9142684936523,-90.4184646606445,-90.6419219970703,-90.6591110229492,-90.6648406982422,-90.69921875,-90.7507858276367,-90.8195419311523,-90.8768310546875,-90.8997573852539,-90.9570465087891,-91.0086135864258,-91.0601806640625,-91.0716400146484,-91.0888290405273,-91.1289367675781,-91.15185546875,-91.1747741699219,-91.1805038452148,-91.1747741699219,-91.1403961181641,-91.0716400146484,-91.0601806640625,-91.0716400146484,-91.15185546875,-91.1690444946289,-91.2034225463867,-91.2263412475586,-91.2263412475586,-91.2206115722656,-91.2263412475586,-91.2607192993164,-91.2492599487305,-91.23779296875,-91.2721786499023,-91.2549896240234,-91.2435302734375,-91.2435302734375,-91.2607192993164,-91.2893676757812,-91.3065567016602,-91.3581161499023,-91.3982238769531,-91.4383392333984,-91.4956283569336,-91.5471954345703,-91.6044921875,-91.6675186157227,-91.7248153686523,-91.8107528686523,-91.8336791992188,-91.8623199462891,-91.8795166015625,-91.9081573486328,-91.9425354003906,-92.0170211791992,-92.1029663085938,-92.0972290039062,-92.2519378662109,-92.2977752685547,-92.320686340332,-92.3378829956055,-92.3607940673828,-92.4352798461914,-92.5326843261719,-92.5899810791016,-92.6300888061523,-92.6759185791016,-92.7389526367188,-92.8019714355469,-92.7962493896484,-92.7618637084961,-92.779052734375,-92.7618637084961,-92.7905197143555,-92.8019714355469,-92.779052734375,-92.7905197143555,-92.7675933837891,-92.7847900390625,-92.7618637084961,-92.7504119873047,-92.7274856567383,-92.6873779296875,-92.6701965332031,-92.6816482543945,-92.7389526367188,-92.779052734375,-92.9108352661133,-92.9222946166992,-92.9051055908203,-92.8879165649414,-92.8478088378906,-92.8077011108398,-92.7847900390625,-92.779052734375,-92.7561340332031,-92.7332153320312,-92.6873779296875,-92.5785217285156,-92.5384140014648,-92.4639282226562,-92.4352798461914,-92.3607940673828,-92.3321533203125,-92.3034973144531,-92.2920455932617,-92.2920455932617,-92.3034973144531,-92.2748489379883,-92.2232818603516,-92.2003707885742,-92.1602630615234,-92.1659927368164,-92.14306640625,-92.1144256591797,-92.1029663085938,-92.0857772827148,-92.0456695556641,-91.9941024780273,-91.97119140625,-91.9310836791992,-91.8795166015625,-91.8222122192383,-91.7649230957031,-91.6789779663086,-91.6216812133789,-91.5586547851562,-91.4841690063477,-91.421142578125,-91.3753051757812,-91.3180084228516,-91.2435302734375,-91.2148818969727,-91.1690444946289,-91.0258102416992,-90.962776184082,-90.9054794311523,-90.8768310546875,-90.8367309570312,-90.8195419311523,-90.7966232299805,-90.7565155029297,-90.7507858276367,-90.7622451782227,-90.7679748535156,-90.8252639770508,-90.8424606323242,-90.8367309570312,-90.8424606323242,-90.8940277099609,-90.9284057617188,-90.8711013793945,-90.8424606323242,-90.8080825805664,-90.7737045288086,-90.7393264770508,-90.7221374511719,-90.693489074707,-90.6361923217773,-90.5559768676758,-90.4929504394531,-90.4471206665039,-90.4127349853516,-90.4070129394531,-90.3783645629883,-90.3382568359375,-90.3267974853516,-90.3153381347656,-90.2981491088867,-90.240852355957,-90.2179336547852,-90.2007522583008,-90.1720962524414,-90.1377182006836,-90.1319885253906,-90.1205368041992,-90.0918807983398,-89.9199905395508,-89.8856201171875,-89.6850814819336,-89.34130859375,-89.1063919067383,-89.066291809082,-89.0376434326172,-88.9918060302734,-88.9345092773438,-88.8600234985352,-88.8141860961914,-88.7454299926758,-88.6938629150391,-88.6652221679688,-88.6422958374023,-88.613655090332,-88.5448989868164,-88.4704132080078,-88.4131164550781,-88.3787384033203,-88.344367980957,-88.2584228515625,-88.1839370727539,-88.161018371582,-88.1323699951172,-88.1266403198242,-88.1266403198242,-88.0979919433594,-88.1094436645508,-88.1438293457031,-88.1438293457031,-88.1209106445312,-88.0865325927734,-88.0578842163086,-88.0235061645508,-88.0063171386719,-87.977668762207,-87.9031829833984,-87.8344268798828,-87.8057861328125,-87.8115158081055,-87.8344268798828,-87.8172378540039,-87.8057861328125,-87.8115158081055,-87.8344268798828,-87.8286972045898,-87.8229675292969,-87.8516235351562,-87.8745346069336,-87.8974609375,-87.8630752563477,-87.8344268798828,-87.7427520751953,-87.6969146728516,-87.6740036010742,-87.6969146728516,-87.7370223999023,-87.7484817504883,-87.7484817504883,-87.7026443481445,-87.6682739257812,-87.6281661987305,-87.5937881469727,-87.6052474975586,-87.610969543457,-87.6338958740234,-87.719841003418,-87.7599487304688,-87.794319152832,-87.8172378540039,-87.8229675292969,-87.8516235351562,-87.8859939575195,-87.9146423339844,-87.9203720092773,-87.977668762207,-87.977668762207,-87.9833984375,-88.0120468139648,-88.0120468139648,-88.0235061645508,-88.0464248657227,-88.0464248657227,-88.0235061645508,-87.9948577880859,-87.9318313598633,-87.8974609375,-87.8286972045898,-87.7656784057617,-87.7484817504883,-87.6911926269531,-87.6338958740234,-87.5937881469727,-87.5708694458008,-87.5651397705078,-87.5479507446289,-87.536491394043,-87.4734649658203,-87.4620056152344,-87.44482421875,-87.4276275634766,-87.4104385375977,-87.3989868164062,-87.3817901611328,-87.3646011352539,-87.3588790893555,-87.3760604858398,-87.3646011352539,-87.3359527587891,-87.3187713623047,-87.2786636352539,-87.261474609375,-87.2328262329102,-87.2328262329102,-87.2099075317383,-87.1812591552734,-87.1411514282227,-87.1468811035156,-87.1067733764648,-87.1182327270508,-87.072395324707,-87.078125,-87.0666656494141,-87.0437469482422,-87.0208282470703,-86.9807205200195,-86.9635314941406,-86.9578018188477,-86.9692611694336,-87.0093688964844,-87.0322952270508,-87.0437469482422,-87.0322952270508,-87.0437469482422,-87.078125,-87.1125030517578,-87.1239624023438,-87.1411514282227,-87.1697998046875,-87.1927185058594,-87.1984481811523,-87.255744934082,-87.3130416870117,-87.341682434082,-87.3588790893555,-87.3703308105469,-87.3760604858398,-87.4218978881836,-87.4620056152344,-87.4906539916992,-87.5135726928711,-87.525032043457,-87.5193023681641,-87.5193023681641,-87.4963836669922,-87.5078430175781,-87.5708694458008,-87.6338958740234,-87.6510848999023,-87.6510848999023,-87.6854629516602,-87.6797332763672,-87.7026443481445,-87.714111328125,-87.708381652832,-87.719841003418,-87.7026443481445,-87.6854629516602,-87.6911926269531,-87.714111328125,-87.7427520751953,-87.7599487304688,-87.7656784057617,-87.7828598022461,-87.8172378540039,-87.8516235351562,-87.8802642822266,-87.891731262207,-87.8974609375,-87.891731262207,-87.8974609375,-87.8802642822266,-87.8688049316406,-87.8688049316406,-87.8859939575195,-87.8802642822266,-87.8344268798828,-87.8286972045898,-87.8344268798828,-87.8229675292969,-87.8057861328125,-87.7714080810547,-87.7656784057617,-87.7714080810547,-87.7828598022461,-87.7885894775391,-87.8115158081055,-87.8172378540039,-87.8115158081055,-87.8000564575195],"lat":[42.502010345459,42.507740020752,42.502010345459,42.502010345459,42.502010345459,42.496280670166,42.502010345459,42.502010345459,42.507740020752,42.502010345459,42.507740020752,42.507740020752,42.5421180725098,42.5707626342773,42.6108741760254,42.6452484130859,42.6681671142578,42.6796264648438,42.6910858154297,42.7025451660156,42.7311935424805,42.7541122436523,42.7884902954102,42.8744316101074,42.9202690124512,42.9947547912598,43.08642578125,43.080696105957,43.1265296936035,43.1666412353516,43.2411231994629,43.2640419006348,43.2984199523926,43.3614463806152,43.413013458252,43.4302024841309,43.4531211853027,43.4989547729492,43.5104141235352,43.5104141235352,43.5562515258789,43.5963592529297,43.6307373046875,43.6880302429199,43.7281379699707,43.7854347229004,43.8026237487793,43.8427314758301,43.854190826416,43.8942947387695,43.9286766052246,43.9745101928711,43.99169921875,44.0146179199219,44.0318031311035,44.0661849975586,44.1005592346191,44.1406669616699,44.175048828125,44.1922340393066,44.2323417663574,44.2781791687012,44.3297462463379,44.3641204833984,44.3985023498535,44.4214210510254,44.4271469116211,44.4557952880859,44.4844436645508,44.5245513916016,44.5417404174805,44.5531959533691,44.576114654541,44.5818481445312,44.6047668457031,44.6506004333496,44.6907081604004,44.7136268615723,44.7537307739258,44.8282203674316,44.8683242797852,44.9141616821289,44.9542694091797,45.0459403991699,45.0745887756348,45.1318855285645,45.2006416320801,45.217830657959,45.2865867614746,45.2980422973633,45.3324203491211,45.3725280761719,45.4069061279297,45.4298248291016,45.4584693908691,45.5214958190918,45.5673332214355,45.5845222473145,45.618896484375,45.6418151855469,45.7048416137695,45.7334899902344,45.7564086914062,45.7850570678711,45.8423538208008,45.8652687072754,45.8939208984375,45.9111061096191,45.9512138366699,45.9798622131348,45.9913215637207,46.0256996154785,46.0256996154785,46.0543479919434,46.071533203125,46.1517486572266,46.4210395812988,46.6559524536133,46.6616821289062,46.6674118041992,46.713249206543,46.7418975830078,46.6903305053711,46.6846008300781,46.7247085571289,46.7361679077148,46.7247085571289,46.701789855957,46.6846008300781,46.6788711547852,46.6674118041992,46.6731414794922,46.6731414794922,46.6846008300781,46.713249206543,46.7361679077148,46.7361679077148,46.7418975830078,46.7590866088867,46.7762756347656,46.7934608459473,46.839298248291,46.839298248291,46.833568572998,46.8794059753418,46.9137840270996,46.9195137023926,46.9309730529785,46.9367027282715,46.9195137023926,46.9080543518066,46.9023246765137,46.8851356506348,46.8450317382812,46.8163795471191,46.7820053100586,46.7304382324219,46.6788711547852,46.6674118041992,46.6330337524414,46.5986595153809,46.575740814209,46.5986595153809,46.6215782165527,46.6273040771484,46.6330337524414,46.6559524536133,46.6616821289062,46.6330337524414,46.5929260253906,46.575740814209,46.5642776489258,46.5585517883301,46.5413627624512,46.5356330871582,46.5413627624512,46.5299034118652,46.5127143859863,46.5127143859863,46.5069847106934,46.5012550354004,46.4840660095215,46.4496879577637,46.3923950195312,46.3408241271973,46.3350982666016,46.3236389160156,46.2835311889648,46.2835311889648,46.249153137207,46.1689414978027,46.1402893066406,46.128833770752,46.123104095459,46.1001853942871,46.0772666931152,46.0371589660645,46.0314292907715,46.0256996154785,46.0085105895996,45.9970512390137,45.9970512390137,46.0142402648926,46.0199699401855,45.9970512390137,45.9913215637207,45.985595703125,45.9684028625488,45.9626770019531,45.9569435119629,45.9397583007812,45.928295135498,45.9225692749023,45.9053764343262,45.8824615478516,45.8652687072754,45.8480834960938,45.8251647949219,45.80224609375,45.7907867431641,45.7850570678711,45.7907867431641,45.7907867431641,45.7735977172852,45.7564086914062,45.7220306396484,45.6876525878906,45.676197052002,45.6590042114258,45.6360893249512,45.6131706237793,45.5845222473145,45.5616035461426,45.532958984375,45.4928512573242,45.4527397155762,45.4069061279297,45.3782577514648,45.349609375,45.349609375,45.3610687255859,45.3782577514648,45.349609375,45.2980422973633,45.2407493591309,45.2063674926758,45.1834526062012,45.1548042297363,45.1204261779785,45.1089668273926,45.0975074768066,45.0688591003418,45.0058326721191,44.9943771362305,44.9771881103516,44.9542694091797,44.9485397338867,44.9198913574219,44.8855133056641,44.8511390686035,44.8282203674316,44.8110313415527,44.770923614502,44.7250862121582,44.7021675109863,44.6677894592285,44.6391410827637,44.5990333557129,44.5818481445312,44.5646591186523,44.5474662780762,44.5245513916016,44.5417404174805,44.5417404174805,44.6047668457031,44.6391410827637,44.6448707580566,44.6620597839355,44.7537307739258,44.8339500427246,44.8511390686035,44.8396759033203,44.8396759033203,44.8396759033203,44.8511390686035,44.8625946044922,44.8797836303711,44.8855133056641,44.891242980957,44.8740577697754,44.8568649291992,44.8396759033203,44.8568649291992,44.8740577697754,44.9141616821289,44.9370803833008,45.0058326721191,45.028751373291,45.0516700744629,45.0860481262207,45.1204261779785,45.1719932556152,45.1719932556152,45.1662635803223,45.1662635803223,45.1891822814941,45.2006416320801,45.2464752197266,45.2636680603027,45.2808570861816,45.2923126220703,45.2865867614746,45.2923126220703,45.2865867614746,45.2808570861816,45.2579383850098,45.2407493591309,45.212100982666,45.1834526062012,45.1605339050293,45.1318855285645,45.0975074768066,45.080322265625,45.0631294250488,45.028751373291,45.0058326721191,44.9886474609375,44.9542694091797,44.89697265625,44.8511390686035,44.7995681762695,44.7422752380371,44.7078971862793,44.6620597839355,44.6391410827637,44.5990333557129,44.5474662780762,44.4844436645508,44.4271469116211,44.3755836486816,44.318286895752,44.2839088439941,44.2323417663574,44.1922340393066,44.1463966369629,44.123477935791,44.1005592346191,44.0547218322754,44.0203475952148,43.9687843322754,43.9401321411133,43.9057579040527,43.8885650634766,43.859920501709,43.8255424499512,43.722412109375,43.6994934082031,43.6593856811523,43.6307373046875,43.5791664123535,43.5390625,43.4760398864746,43.4244728088379,43.3843650817871,43.3270683288574,43.269775390625,43.2239379882812,43.1952857971191,43.1609115600586,43.1208038330078,43.08642578125,43.0635108947754,43.0463180541992,43.0176734924316,42.960376739502,42.9202690124512,42.8744316101074,42.8457832336426,42.817138671875,42.7942199707031,42.759838104248,42.7197341918945,42.6853561401367,42.6681671142578,42.6166000366211,42.5764923095703,42.5306549072266,42.502010345459]}]]],null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"gray","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[42.496280670166,46.9367027282715],"lng":[-92.9222946166992,-86.9578018188477]}},"evals":[],"jsHooks":[]}</script>
